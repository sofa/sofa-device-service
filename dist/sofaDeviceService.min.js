/**
 * sofa-device-service - v0.5.0 - Wed Feb 04 2015 16:52:53 GMT+0100 (CET)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(e,n){"use strict";e.define("sofa.DeviceService",function(e){var t,i,r,o,s,a={},c=navigator.userAgent,u="cc-modern-flexbox",f="cc-no-modern-flexbox",d="cc-ipad-ios-7";a.getHtmlTag=function(){return t=t||n.getElementsByTagName("html")[0]},c.match(/iPad/i)||c.match(/iPhone/i)?(o="iOS",r=c.indexOf("OS ")):c.match(/Android/i)?(o="Android",r=c.indexOf("Android ")):o="unknown",s="iOS"===o&&r>-1?c.substr(r+3,3).replace("_","."):"Android"===o&&r>-1?c.substr(r+8,3):"unknown",i=c.match(/iPad/i)&&"7"===s.substr(0,1),a.isIpadOnIos7=function(){return i};var g={},l=function(){g.width=e.innerWidth,g.height=e.innerHeight};l(),e.addEventListener("orientationchange",l,!1);var h=function(e){var n=a.getOsVersion();return 0===n.indexOf(e)};return a.getViewportDimensions=function(){return g},a.isInPortraitMode=function(){return g.height>g.width},a.isInLandscapeMode=function(){return!a.isInPortraitMode()},a.isTabletSize=function(){return e.innerWidth>640},a.isStockAndroidBrowser=function(){return"Android"===o&&c.indexOf("Chrome")<0},a.flagOs=function(){var e=a.getHtmlTag(),n=a.getOsVersion(),t=n.length>0?n[0]:"0";e.className+=" cc-os-"+a.getOs().toLowerCase()+" cc-osv-"+t},a.flagOverflowSupport=function(){var e=a.getHtmlTag();e.className+=a.hasOverflowSupport()?" cc-has-overflow-support":" cc-has-no-overflow-support"},a.getUserAgent=function(){return c},a.getOs=function(){return o},a.getOsVersion=function(){return s},a.isAndroid2x=function(){return"Android"===a.getOs()&&h("2")},a.hasOverflowSupport=function(){return"Android"===a.getOs()?!h("2"):"iOS"===a.getOs()?!(h("1")||h("2")||h("3")||h("4")):!0},a.hasModernFlexboxSupport=function(){if(c.match(/Firefox/i))return!1;var e=["-webkit-flex","-moz-flex","-o-flex","-ms-flex","flex"],t=n.createElement("span");return e.forEach(function(e){t.style.display=e}),e.indexOf(t.style.display)>-1},a.flagModernFlexboxSupport=function(){var e=a.getHtmlTag();e.className+=a.hasModernFlexboxSupport()?" "+u:" "+f},a.flagIpadOnIos7=function(){if(i){var e=a.getHtmlTag();e.className+=" "+d}},a.setViewportHeightToDeviceHeight=function(){a.getHtmlTag().style.height=a.getViewportDimensions().height+"px"},a})}(sofa,document);